import{r as e,c as r,h as s,H as t,g as a}from"./p-482a9934.js";const i=class{constructor(s){e(this,s),this.recordSelected=r(this,"recordSelected",7),this.cleanRecord=[],this.hideColumns=["location","reserve01","reserve02","sourcefile","created","updated"],this.closeDetail=function(e){e.preventDefault(),this.recordSelected.emit(null),window.location.hash="results"}}handleScroll(e){"#results"==window.location.hash&&this.closeDetail(e)}componentWillLoad(){for(const[e,r]of Object.entries(this.record))this.hideColumns.includes(e)||(this.cleanRecord=Object.assign(Object.assign({},this.cleanRecord),{[e]:r}))}componentDidLoad(){var e=document.querySelector("main").offsetTop;window.scrollTo(0,e)}render(){if(this.cleanRecord)return s(t,{id:"id"+this.record.ID},s("button",{type:"button",class:"close btn-sm","aria-label":"Close",onClick:e=>this.closeDetail(e)},"Zurück ",s("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true"})),s("h4",{class:"mb-3 mb-md-4"},this.record.Person),s("table",{class:"table border-bottom stacktable"},Object.keys(this.cleanRecord).map(e=>s("tr",null,s("td",{class:"label"},s("strong",null,e)),s("td",null,this.cleanRecord[e])))))}};i.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-detail{display:block}gardener-detail .close{font-size:inherit}gardener-detail table{table-layout:auto}gardener-detail table .label{width:12em;text-transform:capitalize}";const l=class{constructor(s){e(this,s),this.recordSelected=r(this,"recordSelected",7),this.currentPage=1,this.itemsPerPage=50}componentWillRender(){this.total=this.results.length,this.pages=Math.ceil(this.total/this.itemsPerPage)}watchHandler(e,r){e!=r&&(this.currentPage=1)}firstItemShown(){return this.itemsPerPage*this.currentPage-this.itemsPerPage}lastItemShown(){let e,r=this.itemsPerPage*this.currentPage;return e=r>this.total?this.total:r,e}pagedResult(){return this.results.slice(this.firstItemShown(),this.lastItemShown())}recordSelectedHandler(e,r){e.preventDefault(),this.recordSelected.emit(r),window.location.hash="id"+r.ID}changePageHandler(e){this.selectedRecord=e.detail,this.currentPage=e.detail,this.pagedResult()}resultInfo(){return s("div",{class:"py-3 py-md-4 small"},"Zeige ",this.total>0?this.firstItemShown()+1+"–"+this.lastItemShown()+" von "+this.total+" Ergebnissen":this.firstItemShown()+" Ergebnisse")}render(){return s(t,null,s("div",{id:"results"},this.resultInfo(),s("table",{class:"table stacktable border-bottom"},s("thead",null,s("tr",null,s("th",{class:"person"},"Person"),s("th",{class:"content"},"Inhalt"),s("th",{class:"type"},"Dokumententyp"),s("th",{class:"year"},"Jahr"),s("th",{class:"author"},"Autor"),s("th",{class:"details"}," "))),s("tbody",null,this.pagedResult().map(e=>s("tr",null,s("td",null,e.Person),s("td",null,e.Inhalt),s("td",null,e.Dokumententyp),s("td",null,e.Jahr),s("td",null,e.Autor),s("td",null,s("a",{class:"link",title:"Details",href:"#",onClick:r=>this.recordSelectedHandler(r,e)},s("i",{class:"fa fa-info-circle fa-lg"}))))))),s("results-pagination",{"current-page":this.currentPage,pages:this.pages})))}static get watchers(){return{results:["watchHandler"]}}};l.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-results{display:block;overflow:hidden}gardener-results #results{width:100%;overflow:hidden}gardener-results table{table-layout:auto;width:100%}gardener-results table .person{width:20em}gardener-results table .id{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .year{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .details{width:1em;overflow:hidden;white-space:nowrap}gardener-results table .author{min-width:12em}gardener-results table a.link{padding:0.25em;display:block;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-decoration:none}gardener-results table td{overflow:hidden}";const o=class{constructor(r){e(this,r),this.errors=[],this.formValues={year:"",keyword:"",person:""},this.loading=!0}async loadData(){try{let e=await fetch(this.api,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(e.status+": "+e.statusText);this.gardb=this.filteredResult=await e.json()}catch(e){this.errors.push(e.message),this.errors.push("Datenbank konnte nicht gelesen werden.")}finally{this.loading=!1}}componentWillLoad(){this.api?this.loadData():this.errors.push("Datenbank konnte nicht geladen werden.")}filterByPerson(e,r){return[r.Person,r.Autor].join().toLowerCase().includes(e)}filterByYear(e,r){return r.Jahr.includes(e)}filterByKeyword(e,r){return[r.Inhalt,r.Dokumententyp,r.Zeitschrift].join().toLowerCase().includes(e)}filterByInitial(e,r){return!!(r.Person&&r.Person.length>0)&&!!r.Person.toLowerCase().startsWith(e)}submitSearch(e){e.preventDefault(),this.inputs=this.host.querySelector("form").querySelectorAll("input"),this.filteredResult=this.gardb,this.inputs.forEach(e=>{this.formValues[e.id]=e.value;let r=e.value.toLowerCase();"person"==e.id&&(this.filteredResult=this.filteredResult.filter(e=>this.filterByPerson(r,e))),"year"==e.id&&(this.filteredResult=this.filteredResult.filter(e=>this.filterByYear(r,e))),"keyword"==e.id&&(this.filteredResult=this.filteredResult.filter(e=>this.filterByKeyword(r,e)))})}resetSearch(e){e.preventDefault(),this.filteredResult=this.gardb,this.selectedRecord=void 0,this.inputs=this.host.querySelector("form").querySelectorAll("input"),this.inputs.forEach(e=>{this.formValues[e.id]=""})}filterLetter(e){e.preventDefault(),this.resetSearch(e),this.filteredResult=this.gardb,console.log(e);var r=e.target.innerText.toLowerCase();this.filteredResult=this.filteredResult.filter(e=>this.filterByInitial(r,e))}glossar(){var e=[];return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].forEach(r=>{r=s("li",null,s("a",{href:"#",onClick:e=>this.filterLetter(e)},r)),e.push(r)}),e}recordSelectedHandler(e){this.selectedRecord=e.detail}return_errors(){return s(t,null,s("h5",null,"Fehler"),this.errors.map(e=>s("div",null,e)))}return_record(){return s(t,{id:"top"},s("gardener-detail",{record:this.selectedRecord}))}render(){return this.errors.length>0?this.return_errors():this.selectedRecord?this.return_record():this.api?s(t,{id:"top"},s("div",{class:"gardener-search-wrapper"},s("div",{class:"gardener-search-container"},s("form",{id:"form",class:"gardener-search-filter"},s("div",{class:"border p-3"},s("h4",{class:"mb-3"},"Datensatz finden"),s("div",{class:"row align-items-end"},s("div",{class:"field-person form-group col-12 col-md-4 col-lg-3"},s("label",{class:"col-form-label"},"Person/Autor"),s("div",null,s("input",{class:"form-control",type:"text",id:"person",value:this.formValues.person}))),s("div",{class:"field-year form-group col-12 col-md-4 col-lg-3"},s("label",{class:"col-form-label"},"Jahr"),s("div",null,s("input",{class:"form-control",type:"text",id:"year",value:this.formValues.year}))),s("div",{class:"field-keyword form-group col-12 col-md-4 col-lg-3"},s("label",{class:"col-form-label"},"Stichwort"),s("div",null,s("input",{class:"form-control",type:"text",id:"keyword",value:this.formValues.keyword}))),s("div",{class:"form-group submit col pt-3 pt-lg-0"},s("button",{type:"submit",class:"btn btn-primary submit-all",onClick:e=>this.submitSearch(e)},"Suchen")))),s("div",{class:"row mt-3"},s("div",{class:"col-12 col-lg-9"},s("div",{class:"border p-3 "},s("h4",{class:"mb-3"},"Nach Anfangsbuchstaben filtern"),s("ul",{class:"glossary d-flex flex-wrap justify-content-start"},this.glossar()))),s("div",{class:"gardener-search-reset col-12 col-lg-3 mt-3 mt-lg-0 pl-lg-0"},s("div",{class:"border p-3 h100"},s("button",{type:"button",class:"btn btn-outline-dark btn-sm submit-selection",onClick:e=>this.resetSearch(e)},"Zurücksetzen"))))))),this.loading?s("loading-spinner",null):s("gardener-results",{results:this.filteredResult})):void 0}get host(){return a(this)}};o.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-search{font-weight:400;font-family:inherit;font-size:var(--gs-font-size-base);-webkit-font-smoothing:antialiased;display:block;background:var(--gs-color-bg);color:var(--gs-color-text);line-height:1.4;padding:15px;max-height:100%}@media (min-width: 768px){gardener-search{padding:25px}}gardener-search *{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search *:before,gardener-search *:after{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search p{margin:0 0 1em 0}gardener-search h2,gardener-search h3,gardener-search h4{margin-top:0;text-transform:uppercase;font-family:inherit}gardener-search p+h4{margin-top:1.5em}gardener-search .gardener-search-wrapper .gardener-search-content{overflow:auto}gardener-search .gardener-search-wrapper .gardener-search-options{padding:0;margin:0;background:0 none}@media (min-width: 1024px){gardener-search .gardener-search-wrapper .gardener-search-options{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}}gardener-search .gardener-search-wrapper .glossary{list-style:none;padding:0}gardener-search .gardener-search-wrapper .glossary li{text-transform:uppercase;font-weight:bold;min-width:25px;min-height:25px;text-align:center;line-height:20px;font-size:18px}gardener-search .gardener-search-wrapper .glossary li a{display:block;height:100%;text-decoration:none;-webkit-transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1);transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1)}gardener-search .gardener-search-wrapper .glossary li a:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}gardener-search .gardener-search-wrapper button{-webkit-appearance:none;-webkit-appearance:none;display:block;display:block;-ms-flex:1;flex:1;margin:10px 0 0;padding-left:25px;padding-right:25px;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}gardener-search .gardener-search-wrapper button+button{margin-left:10px}@media (min-width: 480px){gardener-search .gardener-search-wrapper button{margin:0;display:inline-block;min-width:200px;-ms-flex:none;flex:none}}@media (min-width: 1024px){gardener-search .gardener-search-wrapper button{width:100%}}gardener-search .h100{height:100%}";const n=class{constructor(r){e(this,r)}render(){return s(t,null,s("div",{class:"d-flex justify-content-lg-center py-3"},s("i",{class:"fa fa-circle-o-notch fa-pulse fa-2x"}),s("span",{class:"sr-only"},"Loading...")))}};n.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}:host{display:block}";const c=class{constructor(s){e(this,s),this.pageSelected=r(this,"pageSelected",7)}pageSelectedHandler(e,r){e.preventDefault(),this.pageSelected.emit(r)}changePage(e){this.currentPage=e,this.pageSelected.emit(e)}pagination(){let e=[],r=this.currentPage-3,t=this.currentPage+3;if(r<0&&(t+=Math.abs(r),r=1),this.pages>1){e.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(1)},"«"))),e.push(this.currentPage>1?s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage-1)},"‹")):s("li",{class:"page-item disabled"},s("span",{class:"page-link"},"‹")));for(let a=1;a<=this.pages;a++)a===this.currentPage?e.push(s("li",{class:"page-item active"},s("span",{class:"page-link",tabindex:"1 "},a))):a>=r&&a<=t&&e.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(a)},a)));e.push(this.currentPage<this.pages?s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage+1)},"›")):s("li",{class:"page-item disabled"},s("span",{class:"page-link"},"›"))),e.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.pages)},"»")))}return e}render(){return s(t,null,s("nav",{"aria-label":"Navigate results"},s("ul",{class:"pagination justify-content-center"},this.pagination())))}};c.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}results-pagination{display:block}";export{i as gardener_detail,l as gardener_results,o as gardener_search,n as loading_spinner,c as results_pagination}