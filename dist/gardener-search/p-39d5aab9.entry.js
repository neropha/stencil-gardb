import{r as t,c as e,h as r,H as s,g as i}from"./p-482a9934.js";const a=class{constructor(r){t(this,r),this.recordSelected=e(this,"recordSelected",7),this.filterEvent=e(this,"filterEvent",7),this.formValues={person:"",year:"",keyword:""}}componentWillLoad(){this.filteredResults=this.results}handleFormInput(t){this.formValues[t.target.id]=t.target.value}recordSelectedHandler(t){this.recordSelected.emit(t)}watchStateHandler(t){this.filterEvent.emit(t)}filterByPerson(t,e){return[e.Person,e.Autor].join().toLowerCase().includes(t)}filterByYear(t,e){return[e.Jahr].join().toLowerCase().includes(t)}filterByKeyword(t,e){return[e.Inhalt,e.Dokumententyp,e.Zeitschrift].join().toLowerCase().includes(t)}filterByInitial(t,e){return!!(e.Person&&e.Person.length>0)&&!!e.Person.toLowerCase().startsWith(t)}submitSearch(t){t.preventDefault(),this.recordSelected.emit(null),this.filteredResults=this.results;for(let[e,r]of Object.entries(this.formValues))r=r.toLowerCase(),r.length>0&&("person"==e&&(this.filteredResults=this.filteredResults.filter(t=>this.filterByPerson(r,t))),"year"==e&&(this.filteredResults=this.filteredResults.filter(t=>this.filterByYear(r,t))),"keyword"==e&&(this.filteredResults=this.filteredResults.filter(t=>this.filterByKeyword(r,t))))}resetSearch(t){t.preventDefault(),this.recordSelected.emit(null),this.filteredResults=this.results;for(let[e]of Object.entries(this.formValues))this.formValues[e]=""}filterLetter(t){t.preventDefault(),this.resetSearch(t);var e=t.target.innerText.toLowerCase();this.filteredResults=this.results.filter(t=>this.filterByInitial(e,t))}glossar(){var t=[];return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].forEach(e=>{e=r("li",null,r("a",{href:"#",onClick:t=>this.filterLetter(t)},e)),t.push(e)}),t}render(){return r(s,null,r("div",{class:"filter-bar"},r("form",{id:"form",class:"gardener-search-filter"},r("div",{class:"border p-3"},r("h4",{class:"mb-3"},"Datensatz finden"),r("div",{class:"row align-items-end"},r("div",{class:"field-person form-group col-12 col-md-4 col-lg-3"},r("label",{class:"col-form-label"},"Person/Autor"),r("div",null,r("input",{class:"form-control",type:"text",id:"person",value:this.formValues.person,onInput:t=>this.handleFormInput(t)}))),r("div",{class:"field-year form-group col-12 col-md-4 col-lg-3"},r("label",{class:"col-form-label"},"Jahr"),r("div",null,r("input",{class:"form-control",type:"text",id:"year",value:this.formValues.year,onInput:t=>this.handleFormInput(t)}))),r("div",{class:"field-keyword form-group col-12 col-md-4 col-lg-3"},r("label",{class:"col-form-label"},"Stichwort"),r("div",null,r("input",{class:"form-control",type:"text",id:"keyword",value:this.formValues.keyword,onInput:t=>this.handleFormInput(t)}))),r("div",{class:"form-group submit col pt-3 pt-lg-0"},r("button",{type:"submit",class:"btn btn-primary submit-all",onClick:t=>this.submitSearch(t)},"Suchen")))),r("div",{class:"row mt-3"},r("div",{class:"col-12 col-lg-9"},r("div",{class:"border p-3 "},r("h4",{class:"mb-3"},"Nach Anfangsbuchstaben filtern"),r("ul",{class:"glossary d-flex flex-wrap justify-content-start"},this.glossar()))),r("div",{class:"gardener-search-reset col-12 col-lg-3 mt-3 mt-lg-0 pl-lg-0"},r("div",{class:"border p-3 h100"},r("button",{type:"button",class:"btn btn-outline-dark btn-sm submit-selection",onClick:t=>this.resetSearch(t)},"Zurücksetzen")))))))}get host(){return i(this)}static get watchers(){return{filteredResults:["watchStateHandler"]}}};a.style=':root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}filter-bar{display:block}filter-bar .glossary{list-style:none;padding:0}filter-bar .glossary li{text-transform:uppercase;font-weight:bold;min-width:25px;min-height:25px;text-align:center;line-height:20px;font-size:18px}filter-bar .glossary li a{display:block;height:100%;text-decoration:none;-webkit-transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1);transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1)}filter-bar .glossary li a:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}filter-bar button{-webkit-appearance:none;-webkit-appearance:none;display:block;display:block;-ms-flex:1;flex:1;margin:10px 0 0;padding-left:25px;padding-right:25px;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}filter-bar button:after{content:"";display:block;position:absolute;border-radius:4em;left:0;top:0;width:100%;height:100%;opacity:0;-webkit-transition:all 0.5s;transition:all 0.5s;-webkit-box-shadow:0 0 10px 40px white;box-shadow:0 0 10px 40px white}filter-bar button:active:after{-webkit-box-shadow:0 0 0 0 white;box-shadow:0 0 0 0 white;position:absolute;border-radius:4em;left:0;top:0;opacity:1;-webkit-transition:0s;transition:0s}filter-bar button:active{top:1px}filter-bar button+button{margin-left:10px}@media (min-width: 480px){filter-bar button{margin:0;display:inline-block;min-width:200px;-ms-flex:none;flex:none}}@media (min-width: 1024px){filter-bar button{width:100%}}';const o=class{constructor(r){t(this,r),this.recordSelected=e(this,"recordSelected",7),this.cleanRecord=[],this.hideColumns=["location","reserve01","reserve02","sourcefile","created","updated"],this.closeDetail=function(t){t.preventDefault(),this.recordSelected.emit(null)}}handleScroll(t){"#results"==window.location.hash&&this.closeDetail(t)}recordSelectedHandler(t){this.recordSelected.emit(t)}componentWillLoad(){for(const[t,e]of Object.entries(this.record))this.hideColumns.includes(t)||(this.cleanRecord=Object.assign(Object.assign({},this.cleanRecord),{[t]:e}))}componentDidLoad(){this.element.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}render(){if(this.cleanRecord)return r(s,{id:"id"+this.record.ID,class:"mt-5"},r("button",{type:"button",class:"close btn-sm mt-3 mr-3","aria-label":"Close",onClick:t=>this.closeDetail(t)},"Zurück ",r("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true"})),r("div",{class:"border p-3 mt-3"},r("h2",{class:"mb-3 mb-md-4"},this.record.Person),r("table",{class:"table border-bottom stacktable"},Object.keys(this.cleanRecord).map(t=>r("tr",null,r("td",{class:"label"},r("strong",null,t)),r("td",null,this.cleanRecord[t]))))))}get element(){return i(this)}};o.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-detail{display:block;position:relative}gardener-detail .close{font-size:inherit;outline:none;border:0 none;-webkit-transition:0.5s cubic-bezier(0.075, 0.82, 0.165, 1);transition:0.5s cubic-bezier(0.075, 0.82, 0.165, 1)}gardener-detail .close:focus,gardener-detail .close:hover{outline:none;-webkit-transform:translateX(-5%);transform:translateX(-5%)}gardener-detail table{table-layout:auto}gardener-detail table .label{width:12em;text-transform:capitalize}";const l=class{constructor(r){t(this,r),this.recordSelected=e(this,"recordSelected",7),this.currentPage=1,this.itemsPerPage=50}componentWillRender(){this.total=this.results.length,this.pages=Math.ceil(this.total/this.itemsPerPage)}watchHandler(t,e){t!=e&&(this.currentPage=1)}firstItemShown(){return this.itemsPerPage*this.currentPage-this.itemsPerPage}lastItemShown(){let t,e=this.itemsPerPage*this.currentPage;return t=e>this.total?this.total:e,t}pagedResult(){return this.results.slice(this.firstItemShown(),this.lastItemShown())}recordSelectedHandler(t){this.recordSelected.emit(t)}changePageHandler(t){this.currentPage=t.detail,this.pagedResult()}resultInfo(){return r("div",{class:"py-3 py-md-4 small"},"Zeige ",this.total>0?this.firstItemShown()+1+"–"+this.lastItemShown()+" von "+this.total+" Ergebnissen":this.firstItemShown()+" Ergebnisse")}render(){return r(s,null,this.resultInfo(),r("table",{class:"table stacktable border-bottom"},r("thead",null,r("tr",null,r("th",{class:"person"},"Person"),r("th",{class:"content"},"Inhalt"),r("th",{class:"type"},"Dokumententyp"),r("th",{class:"year"},"Jahr"),r("th",{class:"author"},"Autor"),r("th",{class:"details"}," "))),r("tbody",null,this.pagedResult().map(t=>r("tr",null,r("td",null,t.Person),r("td",null,t.Inhalt),r("td",null,t.Dokumententyp),r("td",null,t.Jahr),r("td",null,t.Autor),r("td",null,r("a",{class:"link",title:"Details",href:"#id"+t.ID,onClick:()=>this.recordSelectedHandler(t.ID)},r("i",{class:"fa fa-info-circle fa-lg"}))))))),r("results-pagination",{"current-page":this.currentPage,pages:this.pages}))}static get watchers(){return{results:["watchHandler"]}}};l.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-results{display:block;overflow:hidden;width:100%;overflow:hidden}gardener-results table{table-layout:auto;width:100%}gardener-results table .person{width:20em}gardener-results table .id{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .year{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .details{width:1em;overflow:hidden;white-space:nowrap}gardener-results table .author{min-width:12em}gardener-results table a.link{padding:0.25em;display:block;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-decoration:none}gardener-results table td{overflow:hidden}";const n=class{constructor(e){t(this,e),this.errors=[],this.loading=!0}async loadData(){try{let t=await fetch(this.api,{method:"GET",mode:"cors",referrerPolicy:"no-referrer"});if(!t.ok)throw new Error(t.status+": "+t.statusText);this.results=this.filteredResults=await t.json()}catch(t){this.errors.push(t.message),this.errors.push("Datenbank konnte nicht geladen werden.")}finally{this.loading=!1}}componentWillLoad(){this.api?this.loadData():this.errors.push("Datenbank nicht definiert.")}filterResultHandler(t){this.filteredResults=t.detail}recordSelectedHandler(t){t.detail?(this.selectedRecord=this.filteredResults.filter(e=>e.ID==t.detail).shift(),window.location.hash="id"+t.detail):(window.location.hash="results",this.selectedRecord=null)}return_errors(t){return r(s,null,r("h5",null,"Fehler"),t.map(t=>r("div",null,t)))}render(){return this.errors.length?this.return_errors(this.errors):this.loading?r(s,null,r("loading-spinner",null)):r(s,null,r("filter-bar",{results:this.results}),this.selectedRecord?r("gardener-detail",{record:this.selectedRecord}):r("gardener-results",{results:this.filteredResults}))}};n.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-search{font-weight:400;font-family:inherit;font-size:var(--gs-font-size-base);-webkit-font-smoothing:antialiased;display:block;background:var(--gs-color-bg);color:var(--gs-color-text);line-height:1.4;padding:15px;max-height:100%}@media (min-width: 768px){gardener-search{padding:25px}}gardener-search *{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search *:before,gardener-search *:after{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search p{margin:0 0 1em 0}gardener-search h2,gardener-search h3,gardener-search h4{margin-top:0;font-family:inherit}gardener-search p+h4{margin-top:1.5em}gardener-search .h100{height:100%}";const c=class{constructor(e){t(this,e)}render(){return r(s,null,r("div",{class:"d-flex justify-content-lg-center py-3"},r("i",{class:"fa fa-circle-o-notch fa-pulse fa-2x"}),r("span",{class:"px-3"},"Loading...")))}};c.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}:host{display:block}";const d=class{constructor(r){t(this,r),this.pageSelected=e(this,"pageSelected",7)}pageSelectedHandler(t,e){t.preventDefault(),this.pageSelected.emit(e)}changePage(t){this.currentPage=t,this.pageSelected.emit(t)}pagination(){let t=[],e=this.currentPage-3,s=this.currentPage+3;if(e<0&&(s+=Math.abs(e),e=1),this.pages>1){t.push(r("li",{class:"page-item"},r("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(1)},"«"))),t.push(this.currentPage>1?r("li",{class:"page-item"},r("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage-1)},"‹")):r("li",{class:"page-item disabled"},r("span",{class:"page-link"},"‹")));for(let i=1;i<=this.pages;i++)i===this.currentPage?t.push(r("li",{class:"page-item active"},r("span",{class:"page-link",tabindex:"1 "},i))):i>=e&&i<=s&&t.push(r("li",{class:"page-item"},r("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(i)},i)));t.push(this.currentPage<this.pages?r("li",{class:"page-item"},r("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage+1)},"›")):r("li",{class:"page-item disabled"},r("span",{class:"page-link"},"›"))),t.push(r("li",{class:"page-item"},r("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.pages)},"»")))}return t}render(){return r(s,null,r("nav",{"aria-label":"Navigate results"},r("ul",{class:"pagination justify-content-center"},this.pagination())))}};d.style=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}results-pagination{display:block}";export{a as filter_bar,o as gardener_detail,l as gardener_results,n as gardener_search,c as loading_spinner,d as results_pagination}