var __awaiter=this&&this.__awaiter||function(e,t,r,o){function s(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,n){function i(e){try{l(o.next(e))}catch(t){n(t)}}function a(e){try{l(o["throw"](e))}catch(t){n(t)}}function l(e){e.done?r(e.value):s(e.value).then(i,a)}l((o=o.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,s,n,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return l([e,t])}}function l(i){if(o)throw new TypeError("Generator is already executing.");while(r)try{if(o=1,s&&(n=i[0]&2?s["return"]:i[0]?s["throw"]||((n=s["return"])&&n.call(s),0):s.next)&&!(n=n.call(s,i[1])).done)return n;if(s=0,n)i=[i[0]&2,n.value];switch(i[0]){case 0:case 1:n=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;s=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(n=r.trys,n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){r.label=i[1];break}if(i[0]===6&&r.label<n[1]){r.label=n[1];n=i;break}if(n&&r.label<n[2]){r.label=n[2];r.ops.push(i);break}if(n[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(a){i=[6,a];s=0}finally{o=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};System.register(["./p-7b877bc9.system.js"],(function(e){"use strict";var t,r,o,s,n;return{setters:[function(e){t=e.r;r=e.c;o=e.h;s=e.H;n=e.g}],execute:function(){var i=':root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}filter-bar{display:block}filter-bar .glossary{list-style:none;padding:0}filter-bar .glossary li{text-transform:uppercase;font-weight:bold;min-width:25px;min-height:25px;text-align:center;line-height:20px;font-size:18px}filter-bar .glossary li a{display:block;height:100%;text-decoration:none;-webkit-transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1);transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1)}filter-bar .glossary li a:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}filter-bar button{-webkit-appearance:none;-webkit-appearance:none;display:block;display:block;-ms-flex:1;flex:1;margin:10px 0 0;padding-left:25px;padding-right:25px;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}filter-bar button:after{content:"";display:block;position:absolute;border-radius:4em;left:0;top:0;width:100%;height:100%;opacity:0;-webkit-transition:all 0.5s;transition:all 0.5s;-webkit-box-shadow:0 0 10px 40px white;box-shadow:0 0 10px 40px white}filter-bar button:active:after{-webkit-box-shadow:0 0 0 0 white;box-shadow:0 0 0 0 white;position:absolute;border-radius:4em;left:0;top:0;opacity:1;-webkit-transition:0s;transition:0s}filter-bar button:active{top:1px}filter-bar button+button{margin-left:10px}@media (min-width: 480px){filter-bar button{margin:0;display:inline-block;min-width:200px;-ms-flex:none;flex:none}}@media (min-width: 1024px){filter-bar button{width:100%}}';var a=e("filter_bar",function(){function e(e){t(this,e);this.recordSelected=r(this,"recordSelected",7);this.filterEvent=r(this,"filterEvent",7);this.formValues={person:"",year:"",keyword:""}}e.prototype.componentWillLoad=function(){this.filteredResults=this.results};e.prototype.handleFormInput=function(e){this.formValues[e.target.id]=e.target.value};e.prototype.recordSelectedHandler=function(e){this.recordSelected.emit(e)};e.prototype.watchStateHandler=function(e){this.filterEvent.emit(e)};e.prototype.filterByPerson=function(e,t){var r=[t.Person,t.Autor].join().toLowerCase();return r.includes(e)};e.prototype.filterByYear=function(e,t){var r=[t.Jahr].join().toLowerCase();return r.includes(e)};e.prototype.filterByKeyword=function(e,t){var r=[t.Inhalt,t.Dokumententyp,t.Zeitschrift].join().toLowerCase();return r.includes(e)};e.prototype.filterByInitial=function(e,t){if(t.Person&&t.Person.length>0){var r=t.Person.toLowerCase();if(!r.startsWith(e)){return false}}else{return false}return true};e.prototype.submitSearch=function(e){var t=this;e.preventDefault();this.recordSelected.emit(null);this.filteredResults=this.results;var r=function(e,r){r=r.toLowerCase();if(r.length>0){if(e=="person"){o.filteredResults=o.filteredResults.filter((function(e){return t.filterByPerson(r,e)}))}if(e=="year"){o.filteredResults=o.filteredResults.filter((function(e){return t.filterByYear(r,e)}))}if(e=="keyword"){o.filteredResults=o.filteredResults.filter((function(e){return t.filterByKeyword(r,e)}))}}};var o=this;for(var s=0,n=Object.entries(this.formValues);s<n.length;s++){var i=n[s],a=i[0],l=i[1];r(a,l)}};e.prototype.resetSearch=function(e){e.preventDefault();this.recordSelected.emit(null);this.filteredResults=this.results;for(var t=0,r=Object.entries(this.formValues);t<r.length;t++){var o=r[t][0];this.formValues[o]=""}};e.prototype.filterLetter=function(e){var t=this;e.preventDefault();this.resetSearch(e);var r=e.target.innerText.toLowerCase();this.filteredResults=this.results.filter((function(e){return t.filterByInitial(r,e)}))};e.prototype.glossar=function(){var e=this;var t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var r=[];t.forEach((function(t){t=o("li",null,o("a",{href:"#",onClick:function(t){return e.filterLetter(t)}},t));r.push(t)}));return r};e.prototype.render=function(){var e=this;return o(s,null,o("div",{class:"filter-bar"},o("form",{id:"form",class:"gardener-search-filter"},o("div",{class:"border p-3"},o("h4",{class:"mb-3"},"Datensatz finden"),o("div",{class:"row align-items-end"},o("div",{class:"field-person form-group col-12 col-md-4 col-lg-3"},o("label",{class:"col-form-label"},"Person/Autor"),o("div",null,o("input",{class:"form-control",type:"text",id:"person",value:this.formValues.person,onInput:function(t){return e.handleFormInput(t)}}))),o("div",{class:"field-year form-group col-12 col-md-4 col-lg-3"},o("label",{class:"col-form-label"},"Jahr"),o("div",null,o("input",{class:"form-control",type:"text",id:"year",value:this.formValues.year,onInput:function(t){return e.handleFormInput(t)}}))),o("div",{class:"field-keyword form-group col-12 col-md-4 col-lg-3"},o("label",{class:"col-form-label"},"Stichwort"),o("div",null,o("input",{class:"form-control",type:"text",id:"keyword",value:this.formValues.keyword,onInput:function(t){return e.handleFormInput(t)}}))),o("div",{class:"form-group submit col pt-3 pt-lg-0"},o("button",{type:"submit",class:"btn btn-primary submit-all",onClick:function(t){return e.submitSearch(t)}},"Suchen")))),o("div",{class:"row mt-3"},o("div",{class:"col-12 col-lg-9"},o("div",{class:"border p-3 "},o("h4",{class:"mb-3"},"Nach Anfangsbuchstaben filtern"),o("ul",{class:"glossary d-flex flex-wrap justify-content-start"},this.glossar()))),o("div",{class:"gardener-search-reset col-12 col-lg-3 mt-3 mt-lg-0 pl-lg-0"},o("div",{class:"border p-3 h100"},o("button",{type:"button",class:"btn btn-outline-dark btn-sm submit-selection",onClick:function(t){return e.resetSearch(t)}},"Zurücksetzen")))))))};Object.defineProperty(e.prototype,"host",{get:function(){return n(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{filteredResults:["watchStateHandler"]}},enumerable:false,configurable:true});return e}());a.style=i;var l=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-detail{display:block;position:relative}gardener-detail .close{font-size:inherit;outline:none;border:0 none;-webkit-transition:0.5s cubic-bezier(0.075, 0.82, 0.165, 1);transition:0.5s cubic-bezier(0.075, 0.82, 0.165, 1)}gardener-detail .close:focus,gardener-detail .close:hover{outline:none;-webkit-transform:translateX(-5%);transform:translateX(-5%)}gardener-detail table{table-layout:auto}gardener-detail table .label{width:12em;text-transform:capitalize}";var c=e("gardener_detail",function(){function e(e){t(this,e);this.recordSelected=r(this,"recordSelected",7);this.cleanRecord=[];this.hideColumns=["location","reserve01","reserve02","sourcefile","created","updated"];this.closeDetail=function(e){e.preventDefault();this.recordSelected.emit(null)}}e.prototype.handleScroll=function(e){if(window.location.hash=="#results"){this.closeDetail(e)}};e.prototype.recordSelectedHandler=function(e){this.recordSelected.emit(e)};e.prototype.componentWillLoad=function(){var e;for(var t=0,r=Object.entries(this.record);t<r.length;t++){var o=r[t],s=o[0],n=o[1];if(!this.hideColumns.includes(s)){this.cleanRecord=Object.assign(Object.assign({},this.cleanRecord),(e={},e[s]=n,e))}}};e.prototype.componentDidLoad=function(){this.element.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};e.prototype.render=function(){var e=this;if(this.cleanRecord){return o(s,{id:"id"+this.record.ID,class:"mt-5"},o("button",{type:"button",class:"close btn-sm mt-3 mr-3","aria-label":"Close",onClick:function(t){return e.closeDetail(t)}},"Zurück ",o("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true"})),o("div",{class:"border p-3 mt-3"},o("h2",{class:"mb-3 mb-md-4"},this.record.Person),o("table",{class:"table border-bottom stacktable"},Object.keys(this.cleanRecord).map((function(t){return o("tr",null,o("td",{class:"label"},o("strong",null,t)),o("td",null,e.cleanRecord[t]))})))))}};Object.defineProperty(e.prototype,"element",{get:function(){return n(this)},enumerable:false,configurable:true});return e}());c.style=l;var u=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-results{display:block;overflow:hidden;width:100%;overflow:hidden}gardener-results table{table-layout:auto;width:100%}gardener-results table .person{width:20em}gardener-results table .id{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .year{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .details{width:1em;overflow:hidden;white-space:nowrap}gardener-results table .author{min-width:12em}gardener-results table a.link{padding:0.25em;display:block;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-decoration:none}gardener-results table td{overflow:hidden}";var d=e("gardener_results",function(){function e(e){t(this,e);this.recordSelected=r(this,"recordSelected",7);this.currentPage=1;this.itemsPerPage=50}e.prototype.componentWillRender=function(){this.total=this.results.length;this.pages=Math.ceil(this.total/this.itemsPerPage)};e.prototype.watchHandler=function(e,t){if(e!=t){this.currentPage=1}};e.prototype.firstItemShown=function(){return this.itemsPerPage*this.currentPage-this.itemsPerPage};e.prototype.lastItemShown=function(){var e=this.itemsPerPage*this.currentPage;var t;if(e>this.total){t=this.total}else{t=e}return t};e.prototype.pagedResult=function(){return this.results.slice(this.firstItemShown(),this.lastItemShown())};e.prototype.recordSelectedHandler=function(e){this.recordSelected.emit(e)};e.prototype.changePageHandler=function(e){this.currentPage=e.detail;this.pagedResult()};e.prototype.resultInfo=function(){return o("div",{class:"py-3 py-md-4 small"},"Zeige ",this.total>0?this.firstItemShown()+1+"–"+this.lastItemShown()+" von "+this.total+" Ergebnissen":this.firstItemShown()+" Ergebnisse")};e.prototype.render=function(){var e=this;return o(s,null,this.resultInfo(),o("table",{class:"table stacktable border-bottom"},o("thead",null,o("tr",null,o("th",{class:"person"},"Person"),o("th",{class:"content"},"Inhalt"),o("th",{class:"type"},"Dokumententyp"),o("th",{class:"year"},"Jahr"),o("th",{class:"author"},"Autor"),o("th",{class:"details"}," "))),o("tbody",null,this.pagedResult().map((function(t){return o("tr",null,o("td",null,t.Person),o("td",null,t.Inhalt),o("td",null,t.Dokumententyp),o("td",null,t.Jahr),o("td",null,t.Autor),o("td",null,o("a",{class:"link",title:"Details",href:"#id"+t["ID"],onClick:function(){return e.recordSelectedHandler(t.ID)}},o("i",{class:"fa fa-info-circle fa-lg"}))))})))),o("results-pagination",{"current-page":this.currentPage,pages:this.pages}))};Object.defineProperty(e,"watchers",{get:function(){return{results:["watchHandler"]}},enumerable:false,configurable:true});return e}());d.style=u;var f=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-search{font-weight:400;font-family:inherit;font-size:var(--gs-font-size-base);-webkit-font-smoothing:antialiased;display:block;background:var(--gs-color-bg);color:var(--gs-color-text);line-height:1.4;padding:15px;max-height:100%}@media (min-width: 768px){gardener-search{padding:25px}}gardener-search *{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search *:before,gardener-search *:after{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search p{margin:0 0 1em 0}gardener-search h2,gardener-search h3,gardener-search h4{margin-top:0;font-family:inherit}gardener-search p+h4{margin-top:1.5em}gardener-search .h100{height:100%}";var p=e("gardener_search",function(){function e(e){t(this,e);this.errors=[];this.loading=true}e.prototype.loadData=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,o;return __generator(this,(function(s){switch(s.label){case 0:s.trys.push([0,3,4,5]);return[4,fetch(this.api,{method:"GET",mode:"cors",referrerPolicy:"no-referrer"})];case 1:e=s.sent();if(!e.ok){console.log("!response.ok");throw new Error(e.status+": "+e.statusText)}t=this;r=this;return[4,e.json()];case 2:t.results=r.filteredResults=s.sent();return[3,5];case 3:o=s.sent();console.log("err");this.errors.push(o.message);this.errors.push("Datenbank konnte nicht geladen werden.");return[3,5];case 4:this.loading=false;console.log("finaly");return[7];case 5:return[2]}}))}))};e.prototype.componentWillLoad=function(){if(!this.api){this.errors.push("Datenbank nicht definiert.")}else{this.loadData()}};e.prototype.filterResultHandler=function(e){this.filteredResults=e.detail};e.prototype.recordSelectedHandler=function(e){if(e.detail){this.selectedRecord=this.filteredResults.filter((function(t){return t.ID==e.detail})).shift();window.location.hash="id"+e.detail}else{window.location.hash="results";this.selectedRecord=null}};e.prototype.return_errors=function(e){return o(s,null,o("h5",null,"Fehler"),e.map((function(e){return o("div",null,e)})))};e.prototype.render=function(){if(this.errors.length){return this.return_errors(this.errors)}else if(this.loading){return o(s,null,o("loading-spinner",null))}if(this.selectedRecord){return o(s,null,o("filter-bar",{results:this.results}),o("gardener-detail",{record:this.selectedRecord}))}else{return o(s,null,o("filter-bar",{results:this.results}),o("gardener-results",{results:this.filteredResults}))}};return e}());p.style=f;var h=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}:host{display:block}";var g=e("loading_spinner",function(){function e(e){t(this,e)}e.prototype.render=function(){return o(s,null,o("div",{class:"d-flex justify-content-lg-center py-3"},o("i",{class:"fa fa-circle-o-notch fa-pulse fa-2x"}),o("span",{class:"pr-3"},"Loading...")))};return e}());g.style=h;var b=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}results-pagination{display:block}";var m=e("results_pagination",function(){function e(e){t(this,e);this.pageSelected=r(this,"pageSelected",7)}e.prototype.pageSelectedHandler=function(e,t){e.preventDefault();this.pageSelected.emit(t)};e.prototype.changePage=function(e){this.currentPage=e;this.pageSelected.emit(e)};e.prototype.pagination=function(){var e=this;var t=[];var r=this.currentPage-3;var s=this.currentPage+3;if(r<0){s+=Math.abs(r);r=1}if(this.pages>1){t.push(o("li",{class:"page-item"},o("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(1)}},"«")));if(this.currentPage>1){t.push(o("li",{class:"page-item"},o("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(e.currentPage-1)}},"‹")))}else{t.push(o("li",{class:"page-item disabled"},o("span",{class:"page-link"},"‹")))}var n=function(n){if(n===i.currentPage){t.push(o("li",{class:"page-item active"},o("span",{class:"page-link",tabindex:"1 "},n)))}else if(n>=r&&n<=s){t.push(o("li",{class:"page-item"},o("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(n)}},n)))}};var i=this;for(var a=1;a<=this.pages;a++){n(a)}if(this.currentPage<this.pages){t.push(o("li",{class:"page-item"},o("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(e.currentPage+1)}},"›")))}else{t.push(o("li",{class:"page-item disabled"},o("span",{class:"page-link"},"›")))}t.push(o("li",{class:"page-item"},o("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(e.pages)}},"»")))}return t};e.prototype.render=function(){return o(s,null,o("nav",{"aria-label":"Navigate results"},o("ul",{class:"pagination justify-content-center"},this.pagination())))};return e}());m.style=b}}}));