import{r as t,c as s,h as e,H as l,g as i}from"./p-e9a272a6.js";const r=class{constructor(e){t(this,e),this.closeDetail=function(t){t.preventDefault(),this.recordSelected.emit(null)},this.recordSelected=s(this,"recordSelected",7)}componentDidLoad(){}render(){if(this.record)return e(l,null,e("button",{type:"button",class:"close btn-sm","aria-label":"Close",onClick:t=>this.closeDetail(t)},"Zurück ",e("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true"})),e("h4",{class:"mb-3 mb-md-4"},this.record.Person),e("table",{class:"table border-bottom stacktable"},Object.keys(this.record).map(t=>e("tr",null,e("td",{class:"label"},e("strong",null,t)),e("td",null,this.record[t])))))}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}gardener-detail{display:block}gardener-detail .close{font-size:inherit}gardener-detail table{table-layout:auto}gardener-detail table .label{width:12em;text-transform:capitalize}"}},a=class{constructor(e){t(this,e),this.page=1,this.itemsPerPage=50,this.recordSelected=s(this,"recordSelected",7)}componentWillRender(){this.total=this.results.length,this.pages=Math.ceil(this.total/this.itemsPerPage)}watchHandler(t,s){t!=s&&(this.page=1)}firstItemShown(){return this.itemsPerPage*this.page-this.itemsPerPage}lastItemShown(){let t,s=this.itemsPerPage*this.page;return t=s>this.total?this.total:s,t}pagedResult(){return this.results.slice(this.firstItemShown(),this.lastItemShown())}recordSelectedHandler(t,s){t.preventDefault(),this.recordSelected.emit(s)}changePageHandler(t){console.log("Received the custom pageSelected event: ",t.detail),this.selectedRecord=t.detail,this.page=t.detail,this.pagedResult()}resultInfo(){return e("div",{class:"py-3 py-md-4 small"},"Zeige ",this.total>0?this.firstItemShown()+1+"–"+this.lastItemShown()+" von "+this.total+" Ergebnissen":this.firstItemShown()+" Ergebnisse")}render(){return e(l,null,e("div",{id:"results"},this.resultInfo(),e("table",{class:"table stacktable border-bottom"},e("thead",null,e("tr",null,e("th",{class:"person"},"Person"),e("th",{class:"content"},"Inhalt"),e("th",{class:"type"},"Dokumententyp"),e("th",{class:"year"},"Jahr"),e("th",{class:"author"},"Autor"),e("th",{class:"details"}," "))),e("tbody",null,this.pagedResult().map(t=>e("tr",null,e("td",null,t.Person),e("td",null,t.Inhalt),e("td",null,t.Dokumententyp),e("td",null,t.Jahr),e("td",null,t.Autor),e("td",null,e("a",{class:"link",title:"Details",href:"#",onClick:s=>this.recordSelectedHandler(s,t)},e("i",{class:"fa fa-info-circle fa-lg"}))))))),e("results-pagination",{"current-page":this.page,pages:this.pages})))}static get watchers(){return{results:["watchHandler"]}}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}gardener-results{display:block;overflow:hidden}gardener-results #results{width:100%;overflow:hidden}gardener-results table{table-layout:auto;width:100%}gardener-results table .person{width:20em}gardener-results table .id,gardener-results table .year{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .details{width:1em;overflow:hidden;white-space:nowrap}gardener-results table .author{min-width:12em}gardener-results table a.link{padding:.25em;display:block;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-decoration:none}gardener-results table td{overflow:hidden}"}},n=class{constructor(s){t(this,s),this.errors=[],this.loading=!0}async loadData(){try{let t=await fetch(this.api,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.status+": "+t.statusText);this.gardb=this.filteredResult=await t.json()}catch(t){this.errors.push(t.message),this.errors.push("Datenbank konnte nicht gelesen werden.")}finally{this.loading=!1}}componentWillLoad(){this.api?this.loadData():this.errors.push("Datenbank konnte nicht geladen werden.")}filterByPerson(t,s){if(!(s.Person&&s.Person.length>0))return!1;var e=s.Person.toLowerCase();return!!e.includes(t)&&(console.log("filteredByPerson: ",e),!0)}filterByYear(t,s){if(!(s.Jahr&&s.Jahr.length>0))return!1;var e=s.Jahr.toLowerCase();return!!e.includes(t)&&(console.log("filteredByYear: ",e),!0)}filterByKeyword(t,s){if(!(s.Inhalt&&s.Inhalt.length>0))return!1;var e=s.Inhalt.toLowerCase();return!!e.includes(t)&&(console.log("filteredByKeyword: ",e),!0)}filterByInitial(t,s){if(!(s.Person&&s.Person.length>0))return!1;var e=s.Person.toLowerCase();return!!e.startsWith(t)&&(console.log("filteredByInitial: ",e),!0)}filterResults(t){t.preventDefault(),this.inputs=this.host.querySelector("form").querySelectorAll("input"),this.filteredResult=this.gardb,this.inputs.forEach(t=>{let s=t.value.toLowerCase();t.value.length>0&&("person"==t.id&&(this.filteredResult=this.filteredResult.filter(t=>this.filterByPerson(s,t))),"year"==t.id&&(this.filteredResult=this.filteredResult.filter(t=>this.filterByYear(s,t))),"keyword"==t.id&&(this.filteredResult=this.filteredResult.filter(t=>this.filterByKeyword(s,t))))})}filterReset(t){t.preventDefault(),this.filteredResult=this.gardb,this.selectedRecord=void 0,this.inputs=this.host.querySelector("form").querySelectorAll("input"),this.inputs.forEach(t=>{t.value=""})}filterLetter(t){t.preventDefault(),this.filterReset(t),this.filteredResult=this.gardb;var s=t.toElement.innerText.toLowerCase();this.filteredResult=this.filteredResult.filter(t=>this.filterByInitial(s,t))}glossar(){var t=[];return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].forEach(s=>{s=e("li",null,e("a",{href:"#",onClick:t=>this.filterLetter(t)},s)),t.push(s)}),t}todoCompletedHandler(t){console.log("Received the custom recordSelected event: ",t.detail),this.selectedRecord=t.detail}return_errors(){return e(l,null,e("h5",null,"Fehler"),this.errors.map(t=>e("div",null,t)))}return_record(){return e(l,{id:"top"},e("gardener-detail",{record:this.selectedRecord}))}render(){return this.errors.length>0?this.return_errors():this.selectedRecord?this.return_record():this.api?e(l,{id:"top"},e("div",{class:"gardener-search-wrapper"},e("div",{class:"gardener-search-container"},e("form",{id:"form",class:"gardener-search-filter"},e("div",{class:"border p-3"},e("h4",{class:"mb-3"},"Datensatz finden"),e("div",{class:"row align-items-end"},e("div",{class:"field-person form-group col-12 col-md-4 col-lg-3"},e("label",{class:"col-form-label"},"Person"),e("div",null,e("input",{class:"form-control",type:"text",id:"person"}))),e("div",{class:"field-year form-group col-12 col-md-4 col-lg-3"},e("label",{class:"col-form-label"},"Jahr"),e("div",null,e("input",{class:"form-control",type:"text",id:"year"}))),e("div",{class:"field-keyword form-group col-12 col-md-4 col-lg-3"},e("label",{class:"col-form-label"},"Stichwort"),e("div",null,e("input",{class:"form-control",type:"text",id:"keyword"}))),e("div",{class:"form-group submit col pt-3 pt-lg-0"},e("button",{type:"submit",class:"btn btn-outline-primary submit-all",onClick:t=>this.filterResults(t)},"Suchen")))),e("div",{class:"row mt-3"},e("div",{class:"col-12 col-lg-9"},e("div",{class:"border p-3 "},e("h4",{class:"mb-3"},"Nach Namen filtern"),e("ul",{class:"glossary d-flex flex-wrap justify-content-start"},this.glossar()))),e("div",{class:"gardener-search-reset col pl-0"},e("div",{class:"border p-3"},e("button",{type:"button",class:"btn btn-primary btn-sm btn-outline-dark submit-selection",onClick:t=>this.filterReset(t)},"Zurücksetzen"))))))),this.loading?e("loading-spinner",null):e("gardener-results",{results:this.filteredResult})):void 0}get host(){return i(this)}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}gardener-search{font-weight:400;font-family:inherit;font-size:var(--gs-font-size-base);-webkit-font-smoothing:antialiased;display:block;background:var(--gs-color-bg);color:var(--gs-color-text);line-height:1.4;padding:15px;max-height:100%}\@media (min-width:768px){gardener-search{padding:25px}}gardener-search *,gardener-search :after,gardener-search :before{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search p{margin:0 0 1em 0}gardener-search h2,gardener-search h3,gardener-search h4{margin-top:0;text-transform:uppercase;font-family:inherit}gardener-search p+h4{margin-top:1.5em}gardener-search button{margin:10px 0 0;white-space:nowrap;-webkit-appearance:none;padding-right:25px;padding-left:25px;display:block;-ms-flex:1;flex:1}gardener-search button+button{margin-left:10px}\@media (min-width:480px){gardener-search button{margin:0;display:inline-block;min-width:200px;-ms-flex:none;flex:none}}gardener-search .gardener-search-wrapper .gardener-search-content{overflow:auto}gardener-search .gardener-search-wrapper .gardener-search-options{padding:0;margin:0;background:0 none}\@media (min-width:1024px){gardener-search .gardener-search-wrapper .gardener-search-options{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}}gardener-search .h100{height:100%}gardener-search .glossary{list-style:none;padding:0}gardener-search .glossary li{text-transform:uppercase;font-weight:700;min-width:25px;min-height:25px;text-align:center;line-height:20px;font-size:18px}gardener-search .glossary li a{display:block;height:100%;text-decoration:none;-webkit-transition:all .2s cubic-bezier(.075,.82,.165,1);transition:all .2s cubic-bezier(.075,.82,.165,1)}gardener-search .glossary li a:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}gardener-search button{text-transform:uppercase;background-color:var(--gs-color-primary);color:#fff;text-align:center;text-decoration:none}\@media (min-width:1024px){gardener-search button{width:100%}}gardener-search button:focus{outline:none}gardener-search button.submit-selection{background-color:transparent}gardener-search button.submit-selection:focus{-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 0 .2rem rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 0 .2rem rgba(0,0,0,.05)}gardener-search button.submit-all:focus{-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 0 .2rem var(--gs-button-primary-focus-color);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 0 .2rem var(--gs-button-primary-focus-color)}"}},c=class{constructor(s){t(this,s)}render(){return e(l,null,e("div",{class:"d-flex justify-content-lg-center py-3"},e("i",{class:"fa fa-circle-o-notch fa-pulse fa-2x"}),e("span",{class:"sr-only"},"Loading...")))}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}:host{display:block}"}},o=class{constructor(e){t(this,e),this.currentPage=1,this.pageSelected=s(this,"pageSelected",7)}pageSelectedHandler(t,s){t.preventDefault(),this.pageSelected.emit(s)}changePage(t){this.currentPage=t,this.pageSelected.emit(t)}pagination(){let t=[],s=this.currentPage-3,l=this.currentPage+3;if(s<0&&(l+=Math.abs(s),s=1),this.pages>1){t.push(e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(1)},"«"))),t.push(this.currentPage>1?e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage-1)},"‹")):e("li",{class:"page-item disabled"},e("span",{class:"page-link"},"‹")));for(let i=1;i<=this.pages;i++)i===this.currentPage?t.push(e("li",{class:"page-item active"},e("span",{class:"page-link",tabindex:"1 "},i))):i>=s&&i<=l&&t.push(e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(i)},i)));t.push(this.currentPage<this.pages?e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage+1)},"›")):e("li",{class:"page-item disabled"},e("span",{class:"page-link"},"›"))),t.push(e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.pages)},"»")))}return t}render(){return e(l,null,e("nav",{"aria-label":"Navigate results"},e("ul",{class:"pagination justify-content-center"},this.pagination())))}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}results-pagination{display:block}"}};export{r as gardener_detail,a as gardener_results,n as gardener_search,c as loading_spinner,o as results_pagination};