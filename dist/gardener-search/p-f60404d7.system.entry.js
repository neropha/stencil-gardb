var __awaiter=this&&this.__awaiter||function(e,r,t,s){function n(e){return e instanceof t?e:new t((function(r){r(e)}))}return new(t||(t=Promise))((function(t,a){function o(e){try{l(s.next(e))}catch(r){a(r)}}function i(e){try{l(s["throw"](e))}catch(r){a(r)}}function l(e){e.done?t(e.value):n(e.value).then(o,i)}l((s=s.apply(e,r||[])).next())}))};var __generator=this&&this.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,n,a,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(e){return function(r){return l([e,r])}}function l(o){if(s)throw new TypeError("Generator is already executing.");while(t)try{if(s=1,n&&(a=o[0]&2?n["return"]:o[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;if(n=0,a)o=[o[0]&2,a.value];switch(o[0]){case 0:case 1:a=o;break;case 4:t.label++;return{value:o[1],done:false};case 5:t.label++;n=o[1];o=[0];continue;case 7:o=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1];a=o;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(o);break}if(a[2])t.ops.pop();t.trys.pop();continue}o=r.call(e,t)}catch(i){o=[6,i];n=0}finally{s=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};System.register(["./p-7b877bc9.system.js"],(function(e){"use strict";var r,t,s,n,a;return{setters:[function(e){r=e.r;t=e.c;s=e.h;n=e.H;a=e.g}],execute:function(){var o=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-detail{display:block}gardener-detail .close{font-size:inherit}gardener-detail table{table-layout:auto}gardener-detail table .label{width:12em;text-transform:capitalize}";var i=e("gardener_detail",function(){function e(e){r(this,e);this.recordSelected=t(this,"recordSelected",7);this.cleanRecord=[];this.hideColumns=["location","reserve01","reserve02","sourcefile","created","updated"];this.closeDetail=function(e){e.preventDefault();this.recordSelected.emit(null);window.location.hash="results"}}e.prototype.handleScroll=function(e){if(window.location.hash=="#results"){this.closeDetail(e)}};e.prototype.componentWillLoad=function(){var e;for(var r=0,t=Object.entries(this.record);r<t.length;r++){var s=t[r],n=s[0],a=s[1];if(!this.hideColumns.includes(n)){this.cleanRecord=Object.assign(Object.assign({},this.cleanRecord),(e={},e[n]=a,e))}}};e.prototype.componentDidLoad=function(){var e=document.querySelector("main").offsetTop;window.scrollTo(0,e)};e.prototype.render=function(){var e=this;if(this.cleanRecord){return s(n,{id:"id"+this.record.ID},s("button",{type:"button",class:"close btn-sm","aria-label":"Close",onClick:function(r){return e.closeDetail(r)}},"Zurück ",s("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true"})),s("h4",{class:"mb-3 mb-md-4"},this.record.Person),s("table",{class:"table border-bottom stacktable"},Object.keys(this.cleanRecord).map((function(r){return s("tr",null,s("td",{class:"label"},s("strong",null,r)),s("td",null,e.cleanRecord[r]))}))))}};return e}());i.style=o;var l=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-results{display:block;overflow:hidden}gardener-results #results{width:100%;overflow:hidden}gardener-results table{table-layout:auto;width:100%}gardener-results table .person{width:20em}gardener-results table .id{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .year{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .details{width:1em;overflow:hidden;white-space:nowrap}gardener-results table .author{min-width:12em}gardener-results table a.link{padding:0.25em;display:block;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-decoration:none}gardener-results table td{overflow:hidden}";var c=e("gardener_results",function(){function e(e){r(this,e);this.recordSelected=t(this,"recordSelected",7);this.currentPage=1;this.itemsPerPage=50}e.prototype.componentWillRender=function(){this.total=this.results.length;this.pages=Math.ceil(this.total/this.itemsPerPage)};e.prototype.watchHandler=function(e,r){if(e!=r){this.currentPage=1}};e.prototype.firstItemShown=function(){return this.itemsPerPage*this.currentPage-this.itemsPerPage};e.prototype.lastItemShown=function(){var e=this.itemsPerPage*this.currentPage;var r;if(e>this.total){r=this.total}else{r=e}return r};e.prototype.pagedResult=function(){return this.results.slice(this.firstItemShown(),this.lastItemShown())};e.prototype.recordSelectedHandler=function(e,r){e.preventDefault();this.recordSelected.emit(r);window.location.hash="id"+r.ID};e.prototype.changePageHandler=function(e){this.selectedRecord=e.detail;this.currentPage=e.detail;this.pagedResult()};e.prototype.resultInfo=function(){return s("div",{class:"py-3 py-md-4 small"},"Zeige ",this.total>0?this.firstItemShown()+1+"–"+this.lastItemShown()+" von "+this.total+" Ergebnissen":this.firstItemShown()+" Ergebnisse")};e.prototype.render=function(){var e=this;return s(n,null,s("div",{id:"results"},this.resultInfo(),s("table",{class:"table stacktable border-bottom"},s("thead",null,s("tr",null,s("th",{class:"person"},"Person"),s("th",{class:"content"},"Inhalt"),s("th",{class:"type"},"Dokumententyp"),s("th",{class:"year"},"Jahr"),s("th",{class:"author"},"Autor"),s("th",{class:"details"}," "))),s("tbody",null,this.pagedResult().map((function(r){return s("tr",null,s("td",null,r.Person),s("td",null,r.Inhalt),s("td",null,r.Dokumententyp),s("td",null,r.Jahr),s("td",null,r.Autor),s("td",null,s("a",{class:"link",title:"Details",href:"#",onClick:function(t){return e.recordSelectedHandler(t,r)}},s("i",{class:"fa fa-info-circle fa-lg"}))))})))),s("results-pagination",{"current-page":this.currentPage,pages:this.pages})))};Object.defineProperty(e,"watchers",{get:function(){return{results:["watchHandler"]}},enumerable:false,configurable:true});return e}());c.style=l;var u=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}gardener-search{font-weight:400;font-family:inherit;font-size:var(--gs-font-size-base);-webkit-font-smoothing:antialiased;display:block;background:var(--gs-color-bg);color:var(--gs-color-text);line-height:1.4;padding:15px;max-height:100%}@media (min-width: 768px){gardener-search{padding:25px}}gardener-search *{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search *:before,gardener-search *:after{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search p{margin:0 0 1em 0}gardener-search h2,gardener-search h3,gardener-search h4{margin-top:0;text-transform:uppercase;font-family:inherit}gardener-search p+h4{margin-top:1.5em}gardener-search .gardener-search-wrapper .gardener-search-content{overflow:auto}gardener-search .gardener-search-wrapper .gardener-search-options{padding:0;margin:0;background:0 none}@media (min-width: 1024px){gardener-search .gardener-search-wrapper .gardener-search-options{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}}gardener-search .gardener-search-wrapper .glossary{list-style:none;padding:0}gardener-search .gardener-search-wrapper .glossary li{text-transform:uppercase;font-weight:bold;min-width:25px;min-height:25px;text-align:center;line-height:20px;font-size:18px}gardener-search .gardener-search-wrapper .glossary li a{display:block;height:100%;text-decoration:none;-webkit-transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1);transition:0.2s all cubic-bezier(0.075, 0.82, 0.165, 1)}gardener-search .gardener-search-wrapper .glossary li a:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}gardener-search .gardener-search-wrapper button{-webkit-appearance:none;-webkit-appearance:none;display:block;display:block;-ms-flex:1;flex:1;margin:10px 0 0;padding-left:25px;padding-right:25px;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}gardener-search .gardener-search-wrapper button+button{margin-left:10px}@media (min-width: 480px){gardener-search .gardener-search-wrapper button{margin:0;display:inline-block;min-width:200px;-ms-flex:none;flex:none}}@media (min-width: 1024px){gardener-search .gardener-search-wrapper button{width:100%}}gardener-search .h100{height:100%}";var d=e("gardener_search",function(){function e(e){r(this,e);this.errors=[];this.formValues={year:"",keyword:"",person:""};this.loading=true}e.prototype.loadData=function(){return __awaiter(this,void 0,void 0,(function(){var e,r,t,s;return __generator(this,(function(n){switch(n.label){case 0:n.trys.push([0,3,4,5]);return[4,fetch(this.api,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}})];case 1:e=n.sent();if(!e.ok){throw new Error(e.status+": "+e.statusText)}r=this;t=this;return[4,e.json()];case 2:r.gardb=t.filteredResult=n.sent();return[3,5];case 3:s=n.sent();this.errors.push(s.message);this.errors.push("Datenbank konnte nicht gelesen werden.");return[3,5];case 4:this.loading=false;return[7];case 5:return[2]}}))}))};e.prototype.componentWillLoad=function(){if(!this.api){this.errors.push("Datenbank konnte nicht geladen werden.")}else{this.loadData()}};e.prototype.filterByPerson=function(e,r){var t=[r.Person,r.Autor].join().toLowerCase();return t.includes(e)};e.prototype.filterByYear=function(e,r){var t=r.Jahr;return t.includes(e)};e.prototype.filterByKeyword=function(e,r){var t=[r.Inhalt,r.Dokumententyp,r.Zeitschrift].join().toLowerCase();return t.includes(e)};e.prototype.filterByInitial=function(e,r){if(r.Person&&r.Person.length>0){var t=r.Person.toLowerCase();if(!t.startsWith(e)){return false}}else{return false}return true};e.prototype.submitSearch=function(e){var r=this;e.preventDefault();this.inputs=this.host.querySelector("form").querySelectorAll("input");this.filteredResult=this.gardb;this.inputs.forEach((function(e){r.formValues[e.id]=e.value;var t=e.value.toLowerCase();if(e.id=="person"){r.filteredResult=r.filteredResult.filter((function(e){return r.filterByPerson(t,e)}))}if(e.id=="year"){r.filteredResult=r.filteredResult.filter((function(e){return r.filterByYear(t,e)}))}if(e.id=="keyword"){r.filteredResult=r.filteredResult.filter((function(e){return r.filterByKeyword(t,e)}))}}))};e.prototype.resetSearch=function(e){var r=this;e.preventDefault();this.filteredResult=this.gardb;this.selectedRecord=undefined;this.inputs=this.host.querySelector("form").querySelectorAll("input");this.inputs.forEach((function(e){r.formValues[e.id]=""}))};e.prototype.filterLetter=function(e){var r=this;e.preventDefault();this.resetSearch(e);this.filteredResult=this.gardb;console.log(e);var t=e.target.innerText.toLowerCase();this.filteredResult=this.filteredResult.filter((function(e){return r.filterByInitial(t,e)}))};e.prototype.glossar=function(){var e=this;var r=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var t=[];r.forEach((function(r){r=s("li",null,s("a",{href:"#",onClick:function(r){return e.filterLetter(r)}},r));t.push(r)}));return t};e.prototype.recordSelectedHandler=function(e){this.selectedRecord=e.detail};e.prototype.return_errors=function(){return s(n,null,s("h5",null,"Fehler"),this.errors.map((function(e){return s("div",null,e)})))};e.prototype.return_record=function(){return s(n,{id:"top"},s("gardener-detail",{record:this.selectedRecord}))};e.prototype.render=function(){var e=this;if(this.errors.length>0){return this.return_errors()}if(this.selectedRecord){return this.return_record()}else if(this.api){return s(n,{id:"top"},s("div",{class:"gardener-search-wrapper"},s("div",{class:"gardener-search-container"},s("form",{id:"form",class:"gardener-search-filter"},s("div",{class:"border p-3"},s("h4",{class:"mb-3"},"Datensatz finden"),s("div",{class:"row align-items-end"},s("div",{class:"field-person form-group col-12 col-md-4 col-lg-3"},s("label",{class:"col-form-label"},"Person/Autor"),s("div",null,s("input",{class:"form-control",type:"text",id:"person",value:this.formValues.person}))),s("div",{class:"field-year form-group col-12 col-md-4 col-lg-3"},s("label",{class:"col-form-label"},"Jahr"),s("div",null,s("input",{class:"form-control",type:"text",id:"year",value:this.formValues.year}))),s("div",{class:"field-keyword form-group col-12 col-md-4 col-lg-3"},s("label",{class:"col-form-label"},"Stichwort"),s("div",null,s("input",{class:"form-control",type:"text",id:"keyword",value:this.formValues.keyword}))),s("div",{class:"form-group submit col pt-3 pt-lg-0"},s("button",{type:"submit",class:"btn btn-primary submit-all",onClick:function(r){return e.submitSearch(r)}},"Suchen")))),s("div",{class:"row mt-3"},s("div",{class:"col-12 col-lg-9"},s("div",{class:"border p-3 "},s("h4",{class:"mb-3"},"Nach Anfangsbuchstaben filtern"),s("ul",{class:"glossary d-flex flex-wrap justify-content-start"},this.glossar()))),s("div",{class:"gardener-search-reset col-12 col-lg-3 mt-3 mt-lg-0 pl-lg-0"},s("div",{class:"border p-3 h100"},s("button",{type:"button",class:"btn btn-outline-dark btn-sm submit-selection",onClick:function(r){return e.resetSearch(r)}},"Zurücksetzen"))))))),!this.loading?s("gardener-results",{results:this.filteredResult}):s("loading-spinner",null))}};Object.defineProperty(e.prototype,"host",{get:function(){return a(this)},enumerable:false,configurable:true});return e}());d.style=u;var p=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}:host{display:block}";var h=e("loading_spinner",function(){function e(e){r(this,e)}e.prototype.render=function(){return s(n,null,s("div",{class:"d-flex justify-content-lg-center py-3"},s("i",{class:"fa fa-circle-o-notch fa-pulse fa-2x"}),s("span",{class:"sr-only"},"Loading...")))};return e}());h.style=p;var g=":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71BC51;--gs-color-secondary:#2196F3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#FFF}results-pagination{display:block}";var f=e("results_pagination",function(){function e(e){r(this,e);this.pageSelected=t(this,"pageSelected",7)}e.prototype.pageSelectedHandler=function(e,r){e.preventDefault();this.pageSelected.emit(r)};e.prototype.changePage=function(e){this.currentPage=e;this.pageSelected.emit(e)};e.prototype.pagination=function(){var e=this;var r=[];var t=this.currentPage-3;var n=this.currentPage+3;if(t<0){n+=Math.abs(t);t=1}if(this.pages>1){r.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(1)}},"«")));if(this.currentPage>1){r.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(e.currentPage-1)}},"‹")))}else{r.push(s("li",{class:"page-item disabled"},s("span",{class:"page-link"},"‹")))}var a=function(a){if(a===o.currentPage){r.push(s("li",{class:"page-item active"},s("span",{class:"page-link",tabindex:"1 "},a)))}else if(a>=t&&a<=n){r.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(a)}},a)))}};var o=this;for(var i=1;i<=this.pages;i++){a(i)}if(this.currentPage<this.pages){r.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(e.currentPage+1)}},"›")))}else{r.push(s("li",{class:"page-item disabled"},s("span",{class:"page-link"},"›")))}r.push(s("li",{class:"page-item"},s("a",{class:"page-link",href:"#results",onClick:function(){return e.changePage(e.pages)}},"»")))}return r};e.prototype.render=function(){return s(n,null,s("nav",{"aria-label":"Navigate results"},s("ul",{class:"pagination justify-content-center"},this.pagination())))};return e}());f.style=g}}}));