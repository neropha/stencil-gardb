import{r as t,c as s,h as e,H as i,g as l}from"./p-e9a272a6.js";const r=class{constructor(e){t(this,e),this.cleanRecord=[],this.hideColumns=["location","reserve01","reserve02","sourcefile","created","updated"],this.closeDetail=function(t){t.preventDefault(),this.recordSelected.emit(null),window.location.hash="results"},this.recordSelected=s(this,"recordSelected",7)}componentDidLoad(){var t=document.querySelector("main").offsetTop;window.scrollTo(0,t);for(const[s,e]of Object.entries(this.record))this.hideColumns.includes(s)||(this.cleanRecord=Object.assign(Object.assign({},this.cleanRecord),{[s]:e}));console.log(this.cleanRecord)}render(){if(this.cleanRecord)return e(i,{id:"id"+this.record.ID},e("button",{type:"button",class:"close btn-sm","aria-label":"Close",onClick:t=>this.closeDetail(t)},"Zurück ",e("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true"})),e("h4",{class:"mb-3 mb-md-4"},this.record.Person),e("table",{class:"table border-bottom stacktable"},Object.keys(this.cleanRecord).map(t=>e("tr",null,e("td",{class:"label"},e("strong",null,t)),e("td",null,this.cleanRecord[t])))))}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}gardener-detail{display:block}gardener-detail .close{font-size:inherit}gardener-detail table{table-layout:auto}gardener-detail table .label{width:12em;text-transform:capitalize}"}},a=class{constructor(e){t(this,e),this.currentPage=1,this.itemsPerPage=50,this.recordSelected=s(this,"recordSelected",7)}componentWillRender(){this.total=this.results.length,this.pages=Math.ceil(this.total/this.itemsPerPage)}watchHandler(t,s){t!=s&&(this.currentPage=1)}firstItemShown(){return this.itemsPerPage*this.currentPage-this.itemsPerPage}lastItemShown(){let t,s=this.itemsPerPage*this.currentPage;return t=s>this.total?this.total:s,t}pagedResult(){return this.results.slice(this.firstItemShown(),this.lastItemShown())}recordSelectedHandler(t,s){t.preventDefault(),this.recordSelected.emit(s),window.location.hash="id"+s.ID}changePageHandler(t){this.selectedRecord=t.detail,this.currentPage=t.detail,this.pagedResult()}resultInfo(){return e("div",{class:"py-3 py-md-4 small"},"Zeige ",this.total>0?this.firstItemShown()+1+"–"+this.lastItemShown()+" von "+this.total+" Ergebnissen":this.firstItemShown()+" Ergebnisse")}render(){return e(i,null,e("div",{id:"results"},this.resultInfo(),e("table",{class:"table stacktable border-bottom"},e("thead",null,e("tr",null,e("th",{class:"person"},"Person"),e("th",{class:"content"},"Inhalt"),e("th",{class:"type"},"Dokumententyp"),e("th",{class:"year"},"Jahr"),e("th",{class:"author"},"Autor"),e("th",{class:"details"}," "))),e("tbody",null,this.pagedResult().map(t=>e("tr",null,e("td",null,t.Person),e("td",null,t.Inhalt),e("td",null,t.Dokumententyp),e("td",null,t.Jahr),e("td",null,t.Autor),e("td",null,e("a",{class:"link",title:"Details",href:"#",onClick:s=>this.recordSelectedHandler(s,t)},e("i",{class:"fa fa-info-circle fa-lg"}))))))),e("results-pagination",{"current-page":this.currentPage,pages:this.pages})))}static get watchers(){return{results:["watchHandler"]}}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}gardener-results{display:block;overflow:hidden}gardener-results #results{width:100%;overflow:hidden}gardener-results table{table-layout:auto;width:100%}gardener-results table .person{width:20em}gardener-results table .id,gardener-results table .year{width:4em;overflow:hidden;white-space:nowrap}gardener-results table .details{width:1em;overflow:hidden;white-space:nowrap}gardener-results table .author{min-width:12em}gardener-results table a.link{padding:.25em;display:block;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-decoration:none}gardener-results table td{overflow:hidden}"}},n=class{constructor(s){t(this,s),this.errors=[],this.formValues={year:"",keyword:"",person:""},this.loading=!0}async loadData(){try{let t=await fetch(this.api,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.status+": "+t.statusText);this.gardb=this.filteredResult=await t.json()}catch(t){this.errors.push(t.message),this.errors.push("Datenbank konnte nicht gelesen werden.")}finally{this.loading=!1}}componentWillLoad(){this.api?this.loadData():this.errors.push("Datenbank konnte nicht geladen werden.")}filterByPerson(t,s){return[s.Person,s.Autor].join().toLowerCase().includes(t)}filterByYear(t,s){return s.Jahr.includes(t)}filterByKeyword(t,s){return[s.Inhalt,s.Dokumententyp,s.Zeitschrift].join().toLowerCase().includes(t)}filterByInitial(t,s){return!!(s.Person&&s.Person.length>0)&&!!s.Person.toLowerCase().startsWith(t)}submitSearch(t){t.preventDefault(),this.inputs=this.host.querySelector("form").querySelectorAll("input"),this.filteredResult=this.gardb,this.inputs.forEach(t=>{this.formValues[t.id]=t.value;let s=t.value.toLowerCase();"person"==t.id&&(this.filteredResult=this.filteredResult.filter(t=>this.filterByPerson(s,t))),"year"==t.id&&(this.filteredResult=this.filteredResult.filter(t=>this.filterByYear(s,t))),"keyword"==t.id&&(this.filteredResult=this.filteredResult.filter(t=>this.filterByKeyword(s,t)))})}resetSearch(t){t.preventDefault(),this.filteredResult=this.gardb,this.selectedRecord=void 0,this.inputs=this.host.querySelector("form").querySelectorAll("input"),this.inputs.forEach(t=>{this.formValues[t.id]=""})}filterLetter(t){t.preventDefault(),this.resetSearch(t),this.filteredResult=this.gardb;var s=t.toElement.innerText.toLowerCase();this.filteredResult=this.filteredResult.filter(t=>this.filterByInitial(s,t))}glossar(){var t=[];return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].forEach(s=>{s=e("li",null,e("a",{href:"#",onClick:t=>this.filterLetter(t)},s)),t.push(s)}),t}recordSelectedHandler(t){this.selectedRecord=t.detail}return_errors(){return e(i,null,e("h5",null,"Fehler"),this.errors.map(t=>e("div",null,t)))}return_record(){return e(i,{id:"top"},e("gardener-detail",{record:this.selectedRecord}))}render(){return this.errors.length>0?this.return_errors():this.selectedRecord?this.return_record():this.api?e(i,{id:"top"},e("div",{class:"gardener-search-wrapper"},e("div",{class:"gardener-search-container"},e("form",{id:"form",class:"gardener-search-filter"},e("div",{class:"border p-3"},e("h4",{class:"mb-3"},"Datensatz finden"),e("div",{class:"row align-items-end"},e("div",{class:"field-person form-group col-12 col-md-4 col-lg-3"},e("label",{class:"col-form-label"},"Person/Autor"),e("div",null,e("input",{value:this.formValues.person,class:"form-control",type:"text",id:"person"}))),e("div",{class:"field-year form-group col-12 col-md-4 col-lg-3"},e("label",{class:"col-form-label"},"Jahr"),e("div",null,e("input",{value:this.formValues.year,class:"form-control",type:"text",id:"year"}))),e("div",{class:"field-keyword form-group col-12 col-md-4 col-lg-3"},e("label",{class:"col-form-label"},"Stichwort"),e("div",null,e("input",{value:this.formValues.keyword,class:"form-control",type:"text",id:"keyword"}))),e("div",{class:"form-group submit col pt-3 pt-lg-0"},e("button",{type:"submit",class:"btn btn-primary submit-all",onClick:t=>this.submitSearch(t)},"Suchen")))),e("div",{class:"row mt-3"},e("div",{class:"col-12 col-lg-9"},e("div",{class:"border p-3 "},e("h4",{class:"mb-3"},"Nach Anfangsbuchstaben filtern"),e("ul",{class:"glossary d-flex flex-wrap justify-content-start"},this.glossar()))),e("div",{class:"gardener-search-reset col-12 col-lg-3 mt-3 mt-lg-0 pl-lg-0"},e("div",{class:"border p-3 h100"},e("button",{type:"button",class:"btn btn-outline-dark btn-sm submit-selection",onClick:t=>this.resetSearch(t)},"Zurücksetzen"))))))),this.loading?e("loading-spinner",null):e("gardener-results",{results:this.filteredResult})):void 0}get host(){return l(this)}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}gardener-search{font-weight:400;font-family:inherit;font-size:var(--gs-font-size-base);-webkit-font-smoothing:antialiased;display:block;background:var(--gs-color-bg);color:var(--gs-color-text);line-height:1.4;padding:15px;max-height:100%}\@media (min-width:768px){gardener-search{padding:25px}}gardener-search *,gardener-search :after,gardener-search :before{-webkit-box-sizing:border-box;box-sizing:border-box}gardener-search p{margin:0 0 1em 0}gardener-search h2,gardener-search h3,gardener-search h4{margin-top:0;text-transform:uppercase;font-family:inherit}gardener-search p+h4{margin-top:1.5em}gardener-search .gardener-search-wrapper .gardener-search-content{overflow:auto}gardener-search .gardener-search-wrapper .gardener-search-options{padding:0;margin:0;background:0 none}\@media (min-width:1024px){gardener-search .gardener-search-wrapper .gardener-search-options{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}}gardener-search .gardener-search-wrapper .glossary{list-style:none;padding:0}gardener-search .gardener-search-wrapper .glossary li{text-transform:uppercase;font-weight:700;min-width:25px;min-height:25px;text-align:center;line-height:20px;font-size:18px}gardener-search .gardener-search-wrapper .glossary li a{display:block;height:100%;text-decoration:none;-webkit-transition:all .2s cubic-bezier(.075,.82,.165,1);transition:all .2s cubic-bezier(.075,.82,.165,1)}gardener-search .gardener-search-wrapper .glossary li a:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}gardener-search .gardener-search-wrapper button{-webkit-appearance:none;display:block;-ms-flex:1;flex:1;margin:10px 0 0;padding-left:25px;padding-right:25px;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}gardener-search .gardener-search-wrapper button+button{margin-left:10px}\@media (min-width:480px){gardener-search .gardener-search-wrapper button{margin:0;display:inline-block;min-width:200px;-ms-flex:none;flex:none}}\@media (min-width:1024px){gardener-search .gardener-search-wrapper button{width:100%}}gardener-search .h100{height:100%}"}},h=class{constructor(s){t(this,s)}render(){return e(i,null,e("div",{class:"d-flex justify-content-lg-center py-3"},e("i",{class:"fa fa-circle-o-notch fa-pulse fa-2x"}),e("span",{class:"sr-only"},"Loading...")))}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}:host{display:block}"}},c=class{constructor(e){t(this,e),this.pageSelected=s(this,"pageSelected",7)}pageSelectedHandler(t,s){t.preventDefault(),this.pageSelected.emit(s)}changePage(t){this.currentPage=t,this.pageSelected.emit(t)}pagination(){let t=[],s=this.currentPage-3,i=this.currentPage+3;if(s<0&&(i+=Math.abs(s),s=1),this.pages>1){t.push(e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(1)},"«"))),t.push(this.currentPage>1?e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage-1)},"‹")):e("li",{class:"page-item disabled"},e("span",{class:"page-link"},"‹")));for(let l=1;l<=this.pages;l++)l===this.currentPage?t.push(e("li",{class:"page-item active"},e("span",{class:"page-link",tabindex:"1 "},l))):l>=s&&l<=i&&t.push(e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(l)},l)));t.push(this.currentPage<this.pages?e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.currentPage+1)},"›")):e("li",{class:"page-item disabled"},e("span",{class:"page-link"},"›"))),t.push(e("li",{class:"page-item"},e("a",{class:"page-link",href:"#results",onClick:()=>this.changePage(this.pages)},"»")))}return t}render(){return e(i,null,e("nav",{"aria-label":"Navigate results"},e("ul",{class:"pagination justify-content-center"},this.pagination())))}static get style(){return":root{--gs-container-max-width:1280px;--gs-container-padding:50px;--gs-color-bg:#efefef;--gs-color-primary:#71bc51;--gs-color-secondary:#2196f3;--gs-color-text:#333;--gs-color-border:#999;--gs-color-disabled:#ccc;--gs-color-background:#fff;--gs-border-radius:5px;--gs-border-radius-small:2px;--gs-font-size-base:15px;--gs-button-primary:var(--gs-color-primary);--gs-button-primary-focus-color:#c1d6b7;--gs-button-primary-border:var(--gs-color-primary);--gs-button-light:#fff}results-pagination{display:block}"}};export{r as gardener_detail,a as gardener_results,n as gardener_search,h as loading_spinner,c as results_pagination};